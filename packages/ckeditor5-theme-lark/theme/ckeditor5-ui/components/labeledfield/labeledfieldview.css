/*
 * Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */

@import "../../../mixins/_rounded.css";

:root {
	--ck-labeled-field-view-transition: .1s cubic-bezier(0, 0, 0.24, 0.95);
}

.ck.ck-labeled-field-view {
	@mixin ck-rounded-corners;

	& > .ck.ck-labeled-field-view__input-wrapper {
		position: relative;
		width: 100%;

		& > .ck-dropdown > .ck.ck-button {
			background: transparent;
		}
	}

	&.ck-labeled-field-view_empty > .ck.ck-labeled-field-view__input-wrapper > .ck-dropdown > .ck-button > .ck-button__label {
		opacity: 0;
	}

	& .ck-labeled-input__wrapper {
		position: relative;
	}

	& .ck.ck-input {
		width: 100%;
	}

	& .ck.ck-label {
		display: block;
		position: absolute;
		top: 0px;
		left: 0px;

		pointer-events: none;

		transform-origin: 0 0;

		/* By default, display the label scaled down above the field. */
		transform: translate(var(--ck-spacing-medium), -6px) scale(.75);

		background: var(--ck-color-base-background);
		padding: 0 calc(.5 * var(--ck-font-size-tiny));
		line-height: initial;
		font-weight: normal;

		/* Prevent overflow when the label is longer than the input */
		text-overflow: ellipsis;
		overflow: hidden;

		max-width: 100%;

		transition:
			transform var(--ck-labeled-field-view-transition),
			padding var(--ck-labeled-field-view-transition),
			background var(--ck-labeled-field-view-transition);
	}

	&.ck-error > .ck.ck-labeled-field-view__input-wrapper > .ck.ck-label {
		color: var(--ck-color-base-error);
	}

	&.ck-labeled-input_focused {
		& .ck-input:not([readonly]) + .ck.ck-label {
			color: hsl(207.9,69.4%,44.9%);
		}
	}

	&.ck-error {
		& .ck-input:not([readonly]) + .ck.ck-label {
			color: var(--ck-color-base-error);
		}
	}

	& .ck-labeled-field-view__status {
		font-size: var(--ck-font-size-small);
		margin-top: var(--ck-spacing-small);

		/* Let the info wrap to the next line to avoid stretching the layout horizontally.
		The status could be very long. */
		white-space: normal;
	}

	& .ck-labeled-field-view__status_error {
		color: var(--ck-color-base-error);
	}

	/* Disabled fields and fields that have no focus should fade out. */
	&.ck-disabled > .ck.ck-labeled-field-view__input-wrapper > .ck.ck-label,
	&.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused) > .ck.ck-labeled-field-view__input-wrapper > .ck.ck-label {
		color: var(--ck-color-input-disabled-text);
	}

	/* Fields that are disabled or not focused and without a placeholder should have full-sized labels. */
	/* stylelint-disable-next-line no-descending-specificity */
	&.ck-disabled > .ck.ck-labeled-field-view__input-wrapper > .ck.ck-label,
	&.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder) > .ck.ck-labeled-field-view__input-wrapper > .ck.ck-label {
		transform: translate(var(--ck-spacing-medium), calc(0.6 * var(--ck-font-size-base))) scale(1);

		/* Compensate for the default translate position */
		max-width: calc(100% - 2 * var(--ck-spacing-medium));

		background: transparent;
		padding: 0;
	}
}
